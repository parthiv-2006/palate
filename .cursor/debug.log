{"location":"auth.controller.js:getRegistrationOptions","message":"Generating registration options","data":{"username":"parthiv.paul5545@gmail.com","userIDType":"object","isBuffer":true},"timestamp":1768654324471,"sessionId":"debug-session","hypothesisId":"A"}
{"location":"auth.controller.js:getRegistrationOptions","message":"Generating registration options","data":{"username":"parthiv.paul5545@gmail.com","userIDType":"object","isBuffer":true},"timestamp":1768654345205,"sessionId":"debug-session","hypothesisId":"A"}
{"location":"user.controller.js:savePreferences","message":"Received preferences request","data":{"userId":"guest_1768654365651","userIdentifier":"guest_1768654365651","hasAuthUser":false},"timestamp":1768654376427,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"Looking up user","data":{"userIdentifier":"guest_1768654365651"},"timestamp":1768654376429,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"Error saving preferences","data":{"error":"Cast to ObjectId failed for value \"guest_1768654365651\" (type string) at path \"_id\" for model \"User\"","errorName":"CastError","stack":"CastError: Cast to ObjectId failed for value \"guest_1768654365651\" (type string) at path \"_id\" for model \"User\"\n    at SchemaObjectId.cast (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\node_modules\\mongoose\\lib\\schema\\objectId.js:253:11)\n    at SchemaType.applySetters (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\node_modules\\mongoose\\lib\\schemaType.js:1280:12)\n    at SchemaType.castForQuery (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\node_modules\\mongoose\\lib\\schemaType.js:1706:17)\n    at cast (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\node_modules\\mongoose\\lib\\cast.js:386:32)\n    at Query.cast (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\node_modules\\mongoose\\lib\\query.js:5040:12)\n    at Query._castConditions (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\node_modules\\mongoose\\lib\\query.js:2374:10)\n    at model.Query._findOne (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\node_modules\\mongoose\\lib\\query.js:2704:8)\n    at model.Query.exec (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\node_modules\\mongoose\\lib\\query.js:4652:80)\n    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at async exports.savePreferences (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\src\\controllers\\user.controller.js:34:14)"},"timestamp":1768654376435,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"auth.controller.js:getRegistrationOptions","message":"Generating registration options","data":{"username":"parthiv.paul@mail.utoronto.ca","userIDType":"object","isBuffer":true},"timestamp":1768654414670,"sessionId":"debug-session","hypothesisId":"A"}
{"location":"auth.controller.js:getRegistrationOptions","message":"Generating registration options","data":{"username":"hahahanope21@gmail.com","userIDType":"object","isBuffer":true},"timestamp":1768654604444,"sessionId":"debug-session","hypothesisId":"A"}
{"location":"auth.controller.js:verifyRegistration","message":"Starting verification","data":{"username":"hahahanope21@gmail.com","hasAttestation":true,"hasResponse":true},"timestamp":1768654611981,"sessionId":"debug-session","hypothesisId":"C"}
{"location":"auth.controller.js:verifyRegistration","message":"Before verification","data":{"hasChallenge":true,"hasResponse":true},"timestamp":1768654611982,"sessionId":"debug-session","hypothesisId":"C"}
{"location":"auth.controller.js:verifyRegistration","message":"After verification","data":{"verified":true,"hasRegistrationInfo":true},"timestamp":1768654611995,"sessionId":"debug-session","hypothesisId":"C"}
{"location":"auth.controller.js:verifyRegistration","message":"Extracting registration info","data":{"hasCredentialID":false,"hasPublicKey":false,"credentialIDType":"undefined","isBuffer":false},"timestamp":1768654611996,"sessionId":"debug-session","hypothesisId":"C"}
{"location":"auth.controller.js:verifyRegistration","message":"Verification error","data":{"error":"The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received undefined","errorName":"TypeError","stack":"TypeError [ERR_INVALID_ARG_TYPE]: The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received undefined\n    at Buffer.from (node:buffer:335:9)\n    at exports.verifyRegistration (C:\\Users\\parth\\Downloads\\UofT Cs\\stream-shop\\server\\src\\controllers\\auth.controller.js:130:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)","code":"ERR_INVALID_ARG_TYPE"},"timestamp":1768654612099,"sessionId":"debug-session","hypothesisId":"C"}
{"location":"user.controller.js:savePreferences","message":"Received preferences request","data":{"userId":"guest_1768654630931","userIdentifier":"guest_1768654630931","hasAuthUser":false},"timestamp":1768654641622,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"Looking up user","data":{"userIdentifier":"guest_1768654630931","isValidObjectId":false},"timestamp":1768654641624,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"Invalid ObjectId format, skipping lookup","data":{"userIdentifier":"guest_1768654630931"},"timestamp":1768654641626,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"User lookup result","data":{"userFound":false},"timestamp":1768654641627,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"Received preferences request","data":{"userId":"guest_1768654814014","userIdentifier":"guest_1768654814014","hasAuthUser":false},"timestamp":1768654821220,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"Looking up user","data":{"userIdentifier":"guest_1768654814014","isValidObjectId":false},"timestamp":1768654821223,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"Invalid ObjectId format, skipping lookup","data":{"userIdentifier":"guest_1768654814014"},"timestamp":1768654821224,"sessionId":"debug-session","hypothesisId":"B"}
{"location":"user.controller.js:savePreferences","message":"User lookup result","data":{"userFound":false},"timestamp":1768654821225,"sessionId":"debug-session","hypothesisId":"B"}
